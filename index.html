<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Medieval Kingdom Builder</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.70.0/phaser.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #373737;
            font-family: 'Courier New', monospace;
            overflow: hidden;
            touch-action: none;
        }
        
        canvas {
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>    
    <script src="game/core/gameState.js"></script>
    <script src="game/data/buildingData.js"></script>
    <script src="game/systems/saveSystem.js"></script>
    <script src="game/core/config.js"></script>
    <script src="game/scenes/gameScene.js"></script>
    <script src="game/core/main.js"></script>
    <script>
        
        


            purchaseSpeedUpgrade(plotIndex) {
                const plot = gameState.plots[plotIndex];
                const buildingDef = buildingTypes[plot.building];
                const cost = UpgradeSystem.getSpeedUpgradeCost(buildingDef.baseId, plot.speedLevel);
                
                if (gameState.resources.food >= cost) {
                    gameState.resources.food -= cost;
                    plot.speedLevel++;
                    UpgradeSystem.applyUpgrades(plot);
                    
                    this.updateUI();
                    this.hideUpgradeMenu();
                    this.recreatePlotVisual(plotIndex);
                }
            }

            purchaseOutputUpgrade(plotIndex) {
                const plot = gameState.plots[plotIndex];
                const buildingDef = buildingTypes[plot.building];
                const cost = UpgradeSystem.getOutputUpgradeCost(buildingDef.baseId, plot.outputLevel);
                
                if (gameState.resources.food >= cost) {
                    gameState.resources.food -= cost;
                    plot.outputLevel++;
                    UpgradeSystem.applyUpgrades(plot);
                    
                    this.updateUI();
                    this.hideUpgradeMenu();
                    this.recreatePlotVisual(plotIndex);
                }
            }

            purchaseAutomation(plotIndex) {
                const plot = gameState.plots[plotIndex];
                
                if (gameState.resources.automationTokens >= 1) {
                    gameState.resources.automationTokens--;
                    plot.hasAutomation = true;
                    UpgradeSystem.applyUpgrades(plot);
                        
            updateUI() {
                this.uiElements.foodText.setText(`Food: ${gameState.resources.food}`);
                this.uiElements.woodText.setText(`Wood: ${gameState.resources.wood}`);
                this.uiElements.goldText.setText(`Gold: ${gameState.resources.gold}`);
                this.uiElements.popText.setText(`Population: ${gameState.resources.population}`);
            }
        }

        // Start the game
        const game = new Phaser.Game(config);
    </script>
</body>
</html>